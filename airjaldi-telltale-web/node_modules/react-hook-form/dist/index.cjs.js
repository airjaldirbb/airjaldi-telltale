"use strict";function e(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("react")),t=e=>"checkbox"===e.type,n=e=>null==e;const s=e=>"object"==typeof e;var c=e=>!n(e)&&!Array.isArray(e)&&s(e)&&!(e instanceof Date),u=e=>e.substring(0,e.search(/.\d/))||e,a=(e,r)=>[...e].some(e=>u(r)===e),i=e=>e.filter(Boolean),l=e=>void 0===e,o=(e,r,t)=>{if(c(e)&&r){const s=i(r.split(/[,[\].]+?/)).reduce((e,r)=>n(e)?e:e[r],e);return l(s)||s===e?l(e[r])?t:e[r]:s}};const f="blur",d="change",b="onBlur",g="onChange",y="onSubmit",m="onTouched",h="all",v="max",x="min",p="maxLength",O="minLength",j="pattern",A="required",V="validate";var k=(e,r)=>{const t=Object.assign({},e);return delete t[r],t};const R=r.createContext(null);R.displayName="RHFContext";const _=()=>r.useContext(R);var F=(e,r,t,n,s=!0)=>e?new Proxy(r,{get:(e,r)=>{if(r in e)return t.current[r]!==h&&(t.current[r]=!s||h),n&&(n.current[r]=!0),e[r]}}):r,w=e=>c(e)&&!Object.keys(e).length,S=(e,r,t)=>{const n=k(e,"name");return w(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find(e=>r[e]===(!t||h))},C=e=>Array.isArray(e)?e:[e],D="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;const E=D?"Proxy"in window:"undefined"!=typeof Proxy;function B(e){const{control:t,name:n}=e||{},s=_(),{formStateRef:c,formStateSubjectRef:u,readFormStateRef:a}=t||s.control,i=r.useRef(n);i.current=n;const[l,o]=r.useState(c.current),f=r.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1});return r.useEffect(()=>{const e=u.current.subscribe({next:e=>(!i.current||!e.name||C(i.current).includes(e.name))&&S(e,f.current)&&o(Object.assign(Object.assign({},c.current),e))});return()=>e.unsubscribe()},[]),F(E,l,a,f,!1)}function N({name:e,rules:n,defaultValue:s,control:u,shouldUnregister:i}){const b=_(),{defaultValuesRef:g,register:y,fieldsRef:m,unregister:h,fieldArrayNamesRef:v,controllerSubjectRef:x,shouldUnmount:p,inFieldArrayActionRef:O}=u||b.control,{onChange:j,onBlur:A,ref:V}=y(e,n),k=a(v.current,e),[R,F]=r.useState(l(o(m.current,e)._f.value)||k?l(s)?o(g.current,e):s:o(m.current,e)._f.value),w=B({control:u||b.control,name:e});return o(m.current,e)._f.value=R,r.useEffect(()=>{const r=x.current.subscribe({next:r=>(!r.name||e===r.name)&&F(o(r.values,e))});return()=>{r.unsubscribe();const t=p||i;(k?t&&!O.current:t)?h(e):o(m.current,e)&&(o(m.current,e)._f.mount=!1)}},[e]),{field:{onChange:r=>{const n=(e=>c(e)&&e.target?t(e.target)?e.target.checked:e.target.value:e)(r);F(n),j({target:{value:n,name:e},type:d})},onBlur:()=>{A({target:{name:e},type:f})},name:e,value:R,ref:e=>e&&V(e)},formState:w,fieldState:{invalid:!!o(w.errors,e),isDirty:!!o(w.dirtyFields,e),isTouched:!!o(w.touchedFields,e),error:o(w.errors,e)}}}var $=(e,r,t,n,s)=>r?Object.assign(Object.assign({},t[e]),{types:Object.assign(Object.assign({},t[e]&&t[e].types?t[e].types:{}),{[n]:s||!0})}):{},M=e=>/^\w*$/.test(e),I=e=>i(e.replace(/["|']|\]/g,"").split(/\.|\[/));function T(e,r,t){let n=-1;const s=M(r)?[r]:I(r),u=s.length,a=u-1;for(;++n<u;){const r=s[n];let u=t;if(n!==a){const t=e[r];u=c(t)||Array.isArray(t)?t:isNaN(+s[n+1])?{}:[]}e[r]=u,e=e[r]}return e}const L=(e,r,t)=>{for(const n of t||Object.keys(e)){const t=o(e,n);if(t){const e=t._f,n=k(t,"_f");if(e&&r(e.name)){if(e.ref.focus&&l(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else c(n)&&L(n,r)}}},P=(e,r={})=>{for(const t in e.current){const s=e.current[t];if(s&&!n(r)){const e=s._f,n=k(s,"_f");T(r,t,e&&e.ref?e.ref.disabled||e.refs&&e.refs.every(e=>e.disabled)?void 0:e.value:Array.isArray(s)?[]:{}),n&&P({current:n},r[t])}}return r};var W=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=(16*Math.random()+e)%16|0;return("x"==r?t:3&t|8).toString(16)})},U=(e=[],r)=>e.map(e=>Object.assign({[r]:e&&e[r]||W()},e)),q=e=>n(e)||!s(e);function H(e,t,n){if(q(e)||q(t)||e instanceof Date||t instanceof Date)return e===t;if(!r.isValidElement(e)){const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const s of r){const r=e[s];if(!n||"ref"!==s){const e=t[s];if((c(r)||Array.isArray(r))&&(c(e)||Array.isArray(e))?!H(r,e,n):r!==e)return!1}}}return!0}function z(e,r,t,n,s){let c=-1;for(;++c<e.length;){for(const n in e[c])Array.isArray(e[c][n])?(!t[c]&&(t[c]={}),t[c][n]=[],z(e[c][n],o(r[c]||{},n,[]),t[c][n],t[c],n)):H(o(r[c]||{},n),e[c][n])?T(t[c]||{},n):t[c]=Object.assign(Object.assign({},t[c]),{[n]:!0});n&&!t.length&&delete n[s]}return t}var G=(e,r,t)=>function e(r,t){if(q(r)||q(t))return t;for(const n in t){const s=r[n],u=t[n];try{r[n]=c(s)&&c(u)||Array.isArray(s)&&Array.isArray(u)?e(s,u):u}catch(e){}}return r}(z(e,r,t.slice(0,e.length)),z(r,e,t.slice(0,e.length)));function J(e,r){return[...e,...C(r)]}var K=e=>Array.isArray(e)?Array(e.length).fill(void 0):void 0;function Q(e,r,t){return[...e.slice(0,r),...C(t),...e.slice(r)]}var X=e=>"string"==typeof e,Y=(e,r,t)=>Array.isArray(e)?(l(e[t])&&(e[t]=void 0),e.splice(t,0,e.splice(r,1)[0]),e):[];function Z(e,r){return[...C(r),...e]}var ee=(e,r)=>l(r)?[]:function(e,r){let t=0;const n=[...e];for(const e of r)n.splice(e-t,1),t++;return i(n).length?n:[]}(e,C(r).sort((e,r)=>e-r)),re=(e,r,t)=>{e[r]=[e[t],e[t]=e[r]][0]},te=e=>"boolean"==typeof e;function ne(e,r){const t=M(r)?[r]:I(r),n=1==t.length?e:function(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=l(e)?n++:e[r[n++]];return e}(e,t),s=t[t.length-1];let u;n&&delete n[s];for(let r=0;r<t.slice(0,-1).length;r++){let n,s=-1;const a=t.slice(0,-(r+1)),i=a.length-1;for(r>0&&(u=e);++s<a.length;){const r=a[s];n=n?n[r]:e[r],i===s&&(c(n)&&w(n)||Array.isArray(n)&&!n.filter(e=>c(e)&&!w(e)||te(e)).length)&&(u?delete u[r]:delete e[r]),u=n}}return e}function se(e,r){const t={};for(const n of e){const e=o(r,n);e&&(M(n)?t[n]=e._f:T(t,n,e._f))}return t}var ce=e=>"file"===e.type,ue=e=>"select-multiple"===e.type,ae=e=>"radio"===e.type;const ie={value:!1,isValid:!1},le={value:!0,isValid:!0};var oe=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!l(e[0].attributes.value)?l(e[0].value)||""===e[0].value?le:{value:e[0].value,isValid:!0}:le:ie}return ie},fe=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>l(e)?e:r?""===e?NaN:+e:t?new Date(e):n?n(e):e;const de={isValid:!1,value:null};var be=e=>Array.isArray(e)?e.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,de):de;function ge(e){if(e&&e._f){const n=e._f.ref;if(n.disabled)return;return ce(n)?n.files:ae(n)?be(e._f.refs).value:ue(n)?(r=n.options,[...r].filter(({selected:e})=>e).map(({value:e})=>e)):t(n)?oe(e._f.refs).value:fe(l(n.value)?e._f.ref.value:n.value,e._f)}var r}var ye=(e,r)=>r&&e&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),me=e=>"function"==typeof e,he=e=>X(e)||r.isValidElement(e),ve=e=>e instanceof RegExp;function xe(e,r,t="validate"){if(he(e)||Array.isArray(e)&&e.every(he)||te(e)&&!e)return{type:t,message:he(e)?e:"",ref:r}}var pe=e=>c(e)&&!ve(e)?e:{value:e,message:""},Oe=async({_f:{ref:e,refs:r,required:s,maxLength:u,minLength:a,min:i,max:l,pattern:o,validate:f,name:d,value:b,valueAsNumber:g,mount:y}},m)=>{if(!y)return{};const h={},k=ae(e),R=t(e),_=k||R,F=(g||ce(e))&&!e.value||""===b||Array.isArray(b)&&!b.length,S=$.bind(null,d,m,h),C=(r,t,n,s=p,c=O)=>{const u=r?t:n;h[d]=Object.assign({type:r?s:c,message:u,ref:e},S(r?s:c,u))};if(s&&(!k&&!R&&(F||n(b))||te(b)&&!b||R&&!oe(r).isValid||k&&!be(r).isValid)){const{value:t,message:n}=he(s)?{value:!!s,message:s}:pe(s);if(t&&(h[d]=Object.assign({type:A,message:n,ref:_?(r||[])[0]||{}:e},S(A,n)),!m))return h}if(!(n(i)&&n(l)||""===b)){let r,t;const s=pe(l),c=pe(i);if(isNaN(b)){const n=e.valueAsDate||new Date(b);X(s.value)&&(r=n>new Date(s.value)),X(c.value)&&(t=n<new Date(c.value))}else{const u=e.valueAsNumber||parseFloat(b);n(s.value)||(r=u>s.value),n(c.value)||(t=u<c.value)}if((r||t)&&(C(!!r,s.message,c.message,v,x),!m))return h}if(X(b)&&!F&&(u||a)){const e=pe(u),r=pe(a),t=!n(e.value)&&b.length>e.value,s=!n(r.value)&&b.length<r.value;if((t||s)&&(C(t,e.message,r.message),!m))return h}if(X(b)&&o&&!F){const{value:r,message:t}=pe(o);if(ve(r)&&!b.match(r)&&(h[d]=Object.assign({type:j,message:t,ref:e},S(j,t)),!m))return h}if(f){const t=_&&r?r[0]:e;if(me(f)){const e=xe(await f(b),t);if(e&&(h[d]=Object.assign(Object.assign({},e),S(V,e.message)),!m))return h}else if(c(f)){let e={};for(const[r,n]of Object.entries(f)){if(!w(e)&&!m)break;const s=xe(await n(b),t,r);s&&(e=Object.assign(Object.assign({},s),S(r,s.message)),m&&(h[d]=e))}if(!w(e)&&(h[d]=Object.assign({ref:t},e),!m))return h}}return h},je=e=>({isOnSubmit:!e||e===y,isOnBlur:e===b,isOnChange:e===g,isOnAll:e===h,isOnTouch:e===m}),Ae=e=>e instanceof HTMLElement;class Ve{constructor(){this.tearDowns=[]}add(e){this.tearDowns.push(e)}unsubscribe(){for(const e of this.tearDowns)e();this.tearDowns=[]}}class ke{constructor(e,r){this.observer=e,this.closed=!1,r.add(()=>this.closed=!0)}next(e){this.closed||this.observer.next(e)}}class Re{constructor(){this.observers=[]}next(e){for(const r of this.observers)r.next(e)}subscribe(e){const r=new Ve,t=new ke(e,r);return this.observers.push(t),r}unsubscribe(){this.observers=[]}}const _e="undefined"==typeof window;exports.Controller=e=>e.render(N(e)),exports.FormProvider=e=>r.createElement(R.Provider,{value:k(e,"children")},e.children),exports.appendErrors=$,exports.get=o,exports.set=T,exports.useController=N,exports.useFieldArray=({control:e,name:t,keyName:n="id",shouldUnregister:s})=>{const c=_(),a=r.useRef(""),f=r.useRef(!1),{isWatchAllRef:d,watchFieldsRef:b,getIsDirty:g,watchSubjectRef:y,fieldArraySubjectRef:m,fieldArrayNamesRef:h,fieldsRef:v,defaultValuesRef:x,formStateRef:p,formStateSubjectRef:O,readFormStateRef:j,validFieldsRef:A,fieldsWithValidationRef:V,fieldArrayDefaultValuesRef:R,unregister:F,shouldUnmount:w,inFieldArrayActionRef:S}=e||c.control,[D,E]=r.useState(U(o(v.current,t)&&f.current?o(P(v),t):o(R.current,u(t))?o(R.current,t,[]):o(x.current,t,[]),n));T(R.current,t,[...D]),h.current.add(t);const B=e=>e.map(e=>k(e||{},n)),N=()=>{const e=o(P(v),t,[]);return U(o(R.current,t,[]).map((r,t)=>Object.assign(Object.assign({},r),e[t])),n)},$=(e,r)=>r?l(r.focusIndex)?r.focusName?r.focusName:r.shouldFocus?`${t}.${e}`:"":`${t}.${r.focusIndex}`:`${t}.${e}`,M=(e=[])=>E(U(e,n)),I=e=>!i(o(e,t,[])).length&&ne(e,t),W=(e,r,n=[],s=!0)=>{if(S.current=!0,o(v.current,t)){const n=e(o(v.current,t),r.argA,r.argB);s&&T(v.current,t,n)}if(Array.isArray(o(p.current.errors,t))){const n=e(o(p.current.errors,t),r.argA,r.argB);s&&T(p.current.errors,t,n),I(p.current.errors)}if(j.current.touchedFields&&o(p.current.touchedFields,t)){const n=e(o(p.current.touchedFields,t),r.argA,r.argB);s&&T(p.current.touchedFields,t,n),I(p.current.touchedFields)}(j.current.dirtyFields||j.current.isDirty)&&(T(p.current.dirtyFields,t,G(B(n),o(x.current,t,[]),o(p.current.dirtyFields,t,[]))),(e=>{e&&T(p.current.dirtyFields,t,G(B(e),o(x.current,t,[]),o(p.current.dirtyFields,t,[])))})(n),I(p.current.dirtyFields)),j.current.isValid&&(T(A.current,t,e(o(A.current,t,[]),r.argA)),I(A.current),T(V.current,t,e(o(V.current,t,[]),r.argA)),I(V.current)),O.current.next({isDirty:g(t,B(n)),errors:p.current.errors,isValid:p.current.isValid})},H=(e,r=0,n="")=>e.forEach((e,s)=>!q(e)&&Object.entries(e).forEach(([e,c])=>{const u=`${n||t}.${n?s:r+s}.${e}`;Array.isArray(c)?H(c,s,u):T(v.current,u,{_f:{ref:{name:u},name:u,value:q(c)?c:Object.assign({},c)}})}));return r.useEffect(()=>{if(S.current=!1,d.current)O.current.next({});else for(const e of b.current)if(t.startsWith(e)){O.current.next({});break}y.current.next({name:t,formValues:P(v)}),a.current&&L(v.current,e=>X(e)&&e.startsWith(a.current)),a.current="",m.current.next({name:t,fields:B([...D])})},[D,t]),r.useEffect(()=>{const e=m.current.subscribe({next({name:e,fields:r,isReset:n}){n&&(ne(v.current,e||t),e?T(R.current,e,r):R.current=r,M(o(R.current,t)))}});return!o(v.current,t)&&T(v.current,t,[]),f.current=!0,()=>{e.unsubscribe(),(w||s)&&F(t)}},[]),{swap:r.useCallback((e,r)=>{const t=N();re(t,e,r),W(re,{argA:e,argB:r},t,!1),M(t)},[t]),move:r.useCallback((e,r)=>{const t=N();Y(t,e,r),M(t),W(Y,{argA:e,argB:r},t,!1)},[t]),prepend:r.useCallback((e,r)=>{const t=C(e),n=Z(N(),t);M(n),W(Z,{argA:K(e)},n),H(t),a.current=$(0,r)},[t]),append:r.useCallback((e,r)=>{const t=C(e),n=J(N(),t),s=n.length-t.length;M(n),W(J,{argA:K(e)},n,!1),H(t,s),a.current=$(s,r)},[t]),remove:r.useCallback(e=>{const r=ee(N(),e);(e=>{C(e).forEach(e=>T(v.current,`${t}${l(e)?"":"."+e}`,l(e)?[]:void 0))})(e),M(r),W(ee,{argA:e},r)},[t]),insert:r.useCallback((e,r,t)=>{const n=C(r),s=Q(N(),e,n);M(s),W(Q,{argA:e,argB:K(r)},s),H(n,e),a.current=$(e,t)},[t]),fields:D}},exports.useForm=function({mode:e=y,reValidateMode:s=g,resolver:d,context:b,defaultValues:m={},shouldFocusError:v=!0,shouldUnregister:x,criteriaMode:p}={}){const O=r.useRef({}),j=r.useRef(new Set),A=r.useRef(new Re),V=r.useRef(new Set),R=r.useRef(new Re),_=r.useRef(new Re),B=r.useRef(new Re),N=r.useRef({}),$=r.useRef(!1),M=r.useRef(new Set),I=r.useRef(!1),W=r.useRef({}),U=r.useRef({}),z=r.useRef(m),J=r.useRef(!1),K=r.useRef(b),Q=r.useRef(d),Y=r.useRef(new Set),Z=je(e),ee=p===h,[re,te]=r.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!Z.isOnSubmit,errors:{}}),ie=r.useRef({isDirty:!E,dirtyFields:!E,touchedFields:!E,isValidating:!E,isValid:!E,errors:!E}),le=r.useRef(re);K.current=b,Q.current=d;const oe=()=>(le.current.isValid=H(U.current,W.current)&&w(le.current.errors),le.current.isValid),de=r.useCallback((e,r,t=!1,s={},c,u)=>{const a=o(le.current.errors,e);if(r?(ne(U.current,e),T(le.current.errors,e,r)):((o(W.current,e)||Q.current)&&T(U.current,e,!0),ne(le.current.errors,e)),(t||u||(r?!H(a,r,!0):a)||!w(s)||ie.current.isValid&&le.current.isValid!==(Q.current?!!c:oe()))&&!n(t)){const r=Object.assign(Object.assign({},s),{isValid:Q.current?!!c:oe(),errors:le.current.errors,name:e});le.current=Object.assign(Object.assign({},le.current),r),A.current.next(u?{name:e}:r)}A.current.next({isValidating:!1})},[]),be=r.useCallback((e,r,s={},c,u)=>{u&&Me(e);const a=o(O.current,e);if(a){const u=a._f;if(u){const a=D&&Ae(u.ref)&&n(r)?"":r;if(u.value=fe(r,u),ae(u.ref)?(u.refs||[]).forEach(e=>e.checked=e.value===a):ce(u.ref)&&!X(a)?u.ref.files=a:ue(u.ref)?[...u.ref.options].forEach(e=>e.selected=a.includes(e.value)):t(u.ref)&&u.refs?u.refs.length>1?u.refs.forEach(e=>e.checked=Array.isArray(a)?!!a.find(r=>r===e.value):a===e.value):u.refs[0].checked=!!a:u.ref.value=a,c){const t=P(O);T(t,e,r),_.current.next({values:Object.assign(Object.assign({},z.current),t),name:e})}s.shouldDirty&&ve(e,a),s.shouldValidate&&ke(e)}else a._f={ref:{name:e,value:r},value:r}}},[]),he=r.useCallback((e,r)=>{const t=P(O);return e&&r&&T(t,e,r),!H(t,z.current)},[]),ve=r.useCallback((e,r,t=!0)=>{if(ie.current.isDirty||ie.current.dirtyFields){const n=!H(o(z.current,e),r),s=o(le.current.dirtyFields,e),c=le.current.isDirty;n?T(le.current.dirtyFields,e,!0):ne(le.current.dirtyFields,e),le.current.isDirty=he();const u={isDirty:le.current.isDirty,dirtyFields:le.current.dirtyFields,name:e},a=ie.current.isDirty&&c!==u.isDirty||ie.current.dirtyFields&&s!==o(le.current.dirtyFields,e);return a&&t&&A.current.next(u),a?u:{}}return{}},[]),xe=r.useCallback(async(e,r)=>{const t=(await Oe(o(O.current,e),ee))[e];return de(e,t,r),l(t)},[ee]),pe=r.useCallback(async(e,r=[])=>{const{errors:t}=await Q.current(P(O),K.current,{criteriaMode:p,names:r,fields:se(j.current,O.current)});for(const r of e){const e=o(t,r);e?T(le.current.errors,r,e):ne(le.current.errors,r)}return t},[p]),Ve=async e=>{for(const r in e){const t=e[r];if(t){const e=t._f,r=k(t,"_f");if(e){const r=await Oe(t,ee);r[e.name]?(T(le.current.errors,e.name,r[e.name]),ne(U.current,e.name)):o(W.current,e.name)&&(T(U.current,e.name,!0),ne(le.current.errors,e.name))}r&&await Ve(r)}}},ke=r.useCallback(async(e,r={})=>{const t=l(e)?Object.keys(O.current):C(e);let n,s={};return A.current.next({isValidating:!0}),Q.current?(s=await pe(t,l(e)?void 0:t),n=t.every(e=>!o(s,e))):l(e)?(await Ve(O.current),n=w(le.current.errors)):n=(await Promise.all(t.filter(e=>o(O.current,e)).map(async e=>await xe(e,null)))).every(Boolean),A.current.next(Object.assign(Object.assign({},X(e)?{name:e}:{}),{errors:le.current.errors,isValidating:!1,isValid:Q.current?w(s):oe()})),!n&&r.shouldFocus&&L(O.current,e=>o(le.current.errors,e),t),n},[pe,xe]),Fe=r.useCallback((e,r,t)=>Object.entries(r).forEach(([r,n])=>{const s=`${e}.${r}`,c=o(O.current,s);Y.current.has(e)||!q(n)||c&&!c._f?Fe(s,n,t):be(s,n,t,!0,!c)}),[ke]),we=e=>J.current||M.current.has(e)||M.current.has((e.match(/\w+/)||[])[0]),Se=(e,r,t,n)=>{const s=o(O.current,e),c=l(s._f.value)?o(z.current,e):s._f.value;return s&&!l(c)?t&&t.defaultChecked?s._f.value=ge(s):a(Y.current,e)?s._f.value=c:be(e,c):s._f.value=ge(s),(!l(c)||n)&&ye(r,s._f.mount)&&!Z.isOnSubmit&&s&&ie.current.isValid&&Oe(s,ee).then(r=>{w(r)?T(U.current,e,!0):ne(U.current,e),le.current.isValid!==oe()&&te(Object.assign(Object.assign({},le.current),{isValid:oe()}))}),c},Ce=r.useCallback(async({type:e,target:r,target:{value:n,type:c}})=>{let a,i,d=r.name;const b=o(O.current,d);if(b){let g=c?ge(b):void 0;g=l(g)?n:g;const y=e===f,{isOnBlur:m,isOnChange:h}=je(s),v=!ye(b._f,b._f.mount)&&!Q.current&&!o(le.current.errors,d)||(({isOnBlur:e,isOnChange:r,isOnTouch:t,isTouched:n,isReValidateOnBlur:s,isReValidateOnChange:c,isBlurEvent:u,isSubmitted:a,isOnAll:i})=>!i&&(!a&&t?!(n||u):(a?s:e)?!u:!(a?c:r)||u))(Object.assign({isBlurEvent:y,isTouched:!!o(le.current.touchedFields,d),isSubmitted:le.current.isSubmitted,isReValidateOnBlur:m,isReValidateOnChange:h},Z)),x=!y&&we(d);l(g)||(b._f.value=g);const j=ve(d,b._f.value,!1);y&&!o(le.current.touchedFields,d)&&(T(le.current.touchedFields,d,!0),ie.current.touchedFields&&(j.touchedFields=le.current.touchedFields));let V=!w(j)||x;if(v)return!y&&R.current.next({name:d,type:e,formValues:De()}),V&&A.current.next(x?{name:d}:Object.assign(Object.assign({},j),{name:d}));if(A.current.next({isValidating:!0}),Q.current){const{errors:e}=await Q.current(P(O),K.current,{criteriaMode:p,fields:se([d],O.current),names:[d]}),n=le.current.isValid;if(a=o(e,d),t(r)&&!a){const r=u(d),t=o(e,r,{});t.type&&t.message&&(a=t),(t||o(le.current.errors,r))&&(d=r)}i=w(e),n!==i&&(V=!0)}else a=(await Oe(b,ee))[d];!y&&R.current.next({name:d,type:e,formValues:De()}),de(d,a,V,j,i,x)}},[]),De=e=>{const r=Object.assign(Object.assign({},z.current),P(O));return l(e)?r:X(e)?o(r,e):e.map(e=>o(r,e))},Ee=r.useCallback(async(e={})=>{const r=le.current.isValid;if(d){const{errors:r}=await Q.current(Object.assign(Object.assign({},P(O)),e),K.current,{criteriaMode:p,fields:se(j.current,O.current)});le.current.isValid=w(r)}else oe();r!==le.current.isValid&&A.current.next({isValid:le.current.isValid})},[p]),Be=r.useCallback((e,r,t,n)=>{const s=Array.isArray(e),c=n||I.current?Object.assign(Object.assign({},z.current),n||P(O)):l(r)?z.current:s?r:{[e]:r};if(l(e))return t&&(J.current=!0),c;const u=[];for(const r of C(e))t&&M.current.add(r),u.push(o(c,r));return s?u:u[0]},[]),Ne=(e,r={})=>{for(const t of e?C(e):Object.keys(j.current))j.current.delete(t),Y.current.delete(t),o(O.current,t)&&(r.keepIsValid||(ne(W.current,t),ne(U.current,t)),!r.keepError&&ne(le.current.errors,t),!r.keepValue&&ne(O.current,t),!r.keepDirty&&ne(le.current.dirtyFields,t),!r.keepTouched&&ne(le.current.touchedFields,t),!x&&!r.keepDefaultValue&&ne(z.current,t),R.current.next({name:t,formValues:De()}));A.current.next(Object.assign(Object.assign(Object.assign({},le.current),r.keepDirty?{isDirty:he()}:{}),Q.current?{}:{isValid:oe()})),!r.keepIsValid&&Ee()},$e=(e,r,n)=>{Me(e,n);let s=o(O.current,e);const c=(e=>ae(e)||t(e))(r);if(r===s._f.ref||D&&Ae(s._f.ref)&&!Ae(r)||c&&Array.isArray(s._f.refs)&&i(s._f.refs).find(e=>e===r))return;s={_f:c?Object.assign(Object.assign({},s._f),{refs:[...i(s._f.refs||[]).filter(e=>Ae(e)&&document.contains(e)),r],ref:{type:r.type,name:e}}):Object.assign(Object.assign({},s._f),{ref:r})},T(O.current,e,s);const u=Se(e,n,r,!0);(c&&Array.isArray(u)?!H(o(O.current,e)._f.value,u):l(o(O.current,e)._f.value))&&(o(O.current,e)._f.value=ge(o(O.current,e)))},Me=r.useCallback((e,r={})=>{const t=o(O.current,e);return T(O.current,e,{_f:Object.assign(Object.assign(Object.assign({},t&&t._f?t._f:{ref:{name:e}}),{name:e,mount:!0}),r)}),ye(r,!0)&&T(W.current,e,!0),j.current.add(e),!t&&Se(e,r),_e?{name:e}:{name:e,onChange:Ce,onBlur:Ce,ref:t=>{if(t)$e(e,t,r);else{const t=o(O.current,e,{}),n=x||r.shouldUnregister;t._f&&(t._f.mount=!1,l(t._f.value)&&(t._f.value=t._f.ref.value)),(a(Y.current,e)?n&&!$.current:n)&&V.current.add(e)}}}},[]),Ie=r.useCallback((e,r)=>async t=>{t&&(t.preventDefault&&t.preventDefault(),t.persist&&t.persist());let n=!0,s=P(O);A.current.next({isSubmitting:!0});try{if(Q.current){const{errors:e,values:r}=await Q.current(s,K.current,{criteriaMode:p,fields:se(j.current,O.current)});le.current.errors=e,s=r}else await Ve(O.current);w(le.current.errors)&&Object.keys(le.current.errors).every(e=>o(s,e))?(A.current.next({errors:{},isSubmitting:!0}),await e(s,t)):(r&&await r(le.current.errors,t),v&&L(O.current,e=>o(le.current.errors,e),j.current))}catch(e){throw n=!1,e}finally{le.current.isSubmitted=!0,A.current.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:w(le.current.errors)&&n,submitCount:le.current.submitCount+1,errors:le.current.errors})}},[v,ee,p]),Te=r.useCallback(({keepErrors:e,keepDirty:r,keepIsSubmitted:t,keepTouched:n,keepDefaultValues:s,keepIsValid:c,keepSubmitCount:u},a)=>{c||(U.current={},W.current={}),M.current=new Set,J.current=!1,A.current.next({submitCount:u?le.current.submitCount:0,isDirty:r?le.current.isDirty:!!s&&H(a,z.current),isSubmitted:!!t&&le.current.isSubmitted,isValid:c?le.current.isValid:!!Ee(a),dirtyFields:r?le.current.dirtyFields:{},touchedFields:n?le.current.touchedFields:{},errors:e?le.current.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},[]),Le=(e,r="")=>{const t=o(O.current,r);if((!t||t&&!t._f)&&(!t&&(q(e)||D&&(e instanceof FileList||e instanceof Date))&&T(O.current,r,{_f:{ref:{name:r,value:e},value:e,name:r}}),Array.isArray(e)||c(e))){r&&!o(O.current,r)&&T(O.current,r,Array.isArray(e)?[]:{});for(const t in e)Le(e[t],r+(r?".":"")+t)}};return r.useEffect(()=>{!x&&Le(z.current);const e=A.current.subscribe({next(e){S(e,ie.current,!0)&&(le.current=Object.assign(Object.assign({},le.current),e),te(le.current))}}),r=B.current.subscribe({next(e){if(e.fields&&e.name&&ie.current.isValid){const r=P(O);T(r,e.name,e.fields),Ee(r)}}});return Q.current&&ie.current.isValid&&Ee(),()=>{R.current.unsubscribe(),e.unsubscribe(),r.unsubscribe()}},[]),r.useEffect(()=>{const e=e=>!Ae(e)||!document.contains(e);I.current=!0;for(const r of V.current){const t=o(O.current,r);t&&(t._f.refs?t._f.refs.every(e):e(t._f.ref))&&Ne(r)}V.current=new Set}),{control:r.useMemo(()=>({register:Me,isWatchAllRef:J,inFieldArrayActionRef:$,watchFieldsRef:M,getIsDirty:he,formStateSubjectRef:A,fieldArraySubjectRef:B,controllerSubjectRef:_,watchSubjectRef:R,watchInternal:Be,fieldsRef:O,validFieldsRef:U,fieldsWithValidationRef:W,fieldArrayNamesRef:Y,readFormStateRef:ie,formStateRef:le,defaultValuesRef:z,fieldArrayDefaultValuesRef:N,unregister:Ne,shouldUnmount:x}),[]),formState:F(E,re,ie),trigger:ke,register:Me,handleSubmit:Ie,watch:r.useCallback((e,r)=>me(e)?R.current.subscribe({next:t=>e(Be(void 0,r),t)}):Be(e,r,!0),[]),setValue:r.useCallback((e,r,t={})=>{const s=o(O.current,e),c=Y.current.has(e);c&&(B.current.next({fields:r,name:e,isReset:!0}),(ie.current.isDirty||ie.current.dirtyFields)&&t.shouldDirty&&(T(le.current.dirtyFields,e,G(r,o(z.current,e,[]),o(le.current.dirtyFields,e,[]))),A.current.next({name:e,dirtyFields:le.current.dirtyFields,isDirty:he(e,r)})),!r.length&&T(O.current,e,[])&&T(N.current,e,[])),(s&&!s._f||c)&&!n(r)?Fe(e,r,c?{}:t):be(e,r,t,!0,!s),we(e)&&A.current.next({}),R.current.next({name:e,formValues:De()})},[Fe]),getValues:r.useCallback(De,[]),reset:r.useCallback((e,r={})=>{const t=e||z.current;if(D&&!r.keepValues)for(const e of j.current){const r=o(O.current,e);if(r&&r._f){const e=Array.isArray(r._f.refs)?r._f.refs[0]:r._f.ref;try{Ae(e)&&e.closest("form").reset();break}catch(e){}}}!r.keepDefaultValues&&(z.current=Object.assign({},t)),r.keepValues||(O.current={},_.current.next({values:Object.assign({},t)}),R.current.next({formValues:Object.assign({},t)}),B.current.next({fields:Object.assign({},t),isReset:!0})),!r.keepDefaultValues&&!x&&Le(Object.assign({},t)),Te(r,e)},[]),clearErrors:r.useCallback(e=>{e?C(e).forEach(e=>ne(le.current.errors,e)):le.current.errors={},A.current.next({errors:le.current.errors})},[]),unregister:r.useCallback(Ne,[]),setError:r.useCallback((e,r,t)=>{const n=((o(O.current,e)||{_f:{}})._f||{}).ref;T(le.current.errors,e,Object.assign(Object.assign({},r),{ref:n})),A.current.next({name:e,errors:le.current.errors,isValid:!1}),t&&t.shouldFocus&&n&&n.focus&&n.focus()},[]),setFocus:r.useCallback(e=>o(O.current,e)._f.ref.focus(),[])}},exports.useFormContext=_,exports.useFormState=B,exports.useWatch=function(e){const{control:t,name:n,defaultValue:s}=e||{},c=_(),u=r.useRef(n);u.current=n;const{watchInternal:a,watchSubjectRef:i}=t||c.control,[o,f]=r.useState(l(s)?a(n):s);return r.useEffect(()=>{a(n);const e=i.current.subscribe({next:({name:e,formValues:r})=>(!u.current||!e||C(u.current).some(r=>e&&r&&(r.startsWith(e)||e.startsWith(r))))&&f(a(u.current,s,!1,r))});return()=>e.unsubscribe()},[]),o};
//# sourceMappingURL=index.cjs.js.map
